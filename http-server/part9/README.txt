EWOULDBLOCK would happened and use perror to handle it.
EAGAIN also need to be handled
